# Infrastructure

## ğŸ—ï¸ **ì•„í‚¤í…ì²˜ ê°œìš”**

### **ì‹œìŠ¤í…œ êµ¬ì„±**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ë‹¨ë‹¨ì´ ì•±     â”‚â”€â”€â”€â–¶â”‚   Buddy API     â”‚â”€â”€â”€â–¶â”‚ Vercel Proxy    â”‚â”€â”€â”€â–¶â”‚  OpenAI API     â”‚
â”‚ (Cloudflare)    â”‚    â”‚ (Cloudflare)    â”‚    â”‚ (Vercel)        â”‚    â”‚ (OpenAI)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **ì—­í•  ë¶„ë‹´**
- **ë‹¨ë‹¨ì´ ì•±**: ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ (React + Cloudflare Pages)
- **Buddy API**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬ (Cloudflare Workers)
- **Vercel Proxy**: ì§€ì—­ë³„ ë¼ìš°íŒ… ë¬¸ì œ í•´ê²° (Vercel Functions)
- **OpenAI API**: AI ëª¨ë¸ ì„œë¹„ìŠ¤ (OpenAI)

## ğŸš€ **Vercel ì¸í”„ë¼**

### **í”Œë«í¼**
- **ì„œë¹„ìŠ¤**: Vercel
- **íƒ€ì…**: Serverless Functions
- **ëŸ°íƒ€ì„**: Node.js 18.x
- **ë¦¬ì „**: ìë™ ìµœì í™” (ê¸€ë¡œë²Œ CDN)

### **ë°°í¬ í™˜ê²½**
- **í”„ë ˆì„ì›Œí¬**: Next.js 15.4.4
- **ë¼ìš°í„°**: App Router
- **ì–¸ì–´**: TypeScript
- **íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €**: npm

### **í•¨ìˆ˜ ì„¤ì •**
```json
{
  "functions": {
    "src/app/api/route.ts": {
      "maxDuration": 30
    }
  }
}
```

### **ë„¤íŠ¸ì›Œí¬ ì„¤ì •**
- **CORS**: ëª¨ë“  ë„ë©”ì¸ í—ˆìš©
- **í—¤ë”**: ìë™ ì„¤ì •
- **íƒ€ì„ì•„ì›ƒ**: 30ì´ˆ
- **ë©”ëª¨ë¦¬**: ìë™ í• ë‹¹

## ğŸŒ **ì§€ì—­ ìµœì í™”**

### **ë¬¸ì œ ìƒí™©**
- **IPv6 ìš”ì²­**: í™ì½©(HKG) ë°ì´í„°ì„¼í„°ë¡œ ë¼ìš°íŒ…
- **OpenAI API**: í™ì½© ì§€ì—­ì—ì„œ ì ‘ê·¼ ì œí•œ
- **ê²°ê³¼**: 403 ì˜¤ë¥˜ ë°œìƒ

### **í•´ê²° ë°©ì•ˆ**
- **Vercel ìë™ ìµœì í™”**: ì‚¬ìš©ì ìœ„ì¹˜ ê¸°ë°˜ ìµœì  ì§€ì—­ ì„ íƒ
- **ê¸€ë¡œë²Œ CDN**: ì „ ì„¸ê³„ ì—£ì§€ ì„œë²„ í™œìš©
- **ì§€ì—° ì‹œê°„ ìµœì†Œí™”**: ê°€ì¥ ê°€ê¹Œìš´ ì„œë²„ë¡œ ìë™ ë¼ìš°íŒ…

### **ì§€ì—­ë³„ ì„±ëŠ¥**
- **í•œêµ­**: NRT (ì¼ë³¸) ë˜ëŠ” ICN (í•œêµ­) ì„œë²„
- **ë¯¸êµ­**: SFO, NYC, IAD ë“±
- **ìœ ëŸ½**: FRA, LHR, CDG ë“±
- **ê¸°íƒ€**: ìë™ ìµœì í™”

## ğŸ”§ **ì„¤ì • íŒŒì¼**

### **vercel.json**
```json
{
  "name": "buddy-vercel-proxy",
  "version": 2,
  "functions": {
    "src/app/api/route.ts": {
      "maxDuration": 30
    }
  },
  "headers": [
    {
      "source": "/api/(.*)",
      "headers": [
        {
          "key": "Access-Control-Allow-Origin",
          "value": "*"
        },
        {
          "key": "Access-Control-Allow-Methods",
          "value": "GET, POST, PUT, DELETE, OPTIONS"
        },
        {
          "key": "Access-Control-Allow-Headers",
          "value": "Content-Type, Authorization"
        }
      ]
    }
  ]
}
```

### **package.json**
```json
{
  "name": "buddy-vercel-proxy",
  "version": "1.0.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint"
  },
  "dependencies": {
    "next": "15.4.4",
    "react": "^18",
    "react-dom": "^18"
  },
  "devDependencies": {
    "@types/node": "^20",
    "@types/react": "^18",
    "@types/react-dom": "^18",
    "eslint": "^8",
    "eslint-config-next": "15.4.4",
    "typescript": "^5"
  }
}
```

## ğŸ“Š **ëª¨ë‹ˆí„°ë§**

### **Vercel ëŒ€ì‹œë³´ë“œ**
- **URL**: https://vercel.com/dashboard
- **ê¸°ëŠ¥**: ì‹¤ì‹œê°„ ë¡œê·¸, ì„±ëŠ¥ ë©”íŠ¸ë¦­, ì—ëŸ¬ ì¶”ì 
- **ì§€ì—­ë³„ í†µê³„**: ìš”ì²­ ë¶„í¬ ë° ì‘ë‹µ ì‹œê°„

### **ë¡œê·¸ í™•ì¸**
```bash
# ë¡œì»¬ ê°œë°œ
npm run dev

# ë°°í¬ëœ í™˜ê²½
vercel logs
```

### **ì„±ëŠ¥ ë©”íŠ¸ë¦­**
- **ì‘ë‹µ ì‹œê°„**: < 100ms (ìºì‹œëœ ê²½ìš°)
- **Cold Start**: < 1ì´ˆ
- **ê°€ìš©ì„±**: 99.9%+
- **ì²˜ë¦¬ëŸ‰**: ìë™ ìŠ¤ì¼€ì¼ë§

## ğŸ”’ **ë³´ì•ˆ**

### **CORS ì •ì±…**
- **í—ˆìš© ë„ë©”ì¸**: ëª¨ë“  ë„ë©”ì¸ (`*`)
- **í—ˆìš© ë©”ì„œë“œ**: GET, POST, PUT, DELETE, OPTIONS
- **í—ˆìš© í—¤ë”**: Content-Type, Authorization

### **API ë³´ì•ˆ**
- **ì¸ì¦**: OpenAI API í‚¤ë¥¼ í†µí•œ ì¸ì¦
- **ìš”ì²­ ê²€ì¦**: í•„ìˆ˜ íŒŒë¼ë¯¸í„° í™•ì¸
- **ì—ëŸ¬ ì²˜ë¦¬**: ë¯¼ê°í•œ ì •ë³´ ë…¸ì¶œ ë°©ì§€

### **ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ**
- **HTTPS**: ìë™ SSL/TLS ì¸ì¦ì„œ
- **DDoS ë³´í˜¸**: Vercel ìë™ ë³´í˜¸
- **Rate Limiting**: ìë™ ì œí•œ

## ğŸš€ **ë°°í¬ í”„ë¡œì„¸ìŠ¤**

### **ìë™ ë°°í¬**
1. **Git Push**: main ë¸Œëœì¹˜ì— í‘¸ì‹œ
2. **Vercel ê°ì§€**: ìë™ ë¹Œë“œ ì‹œì‘
3. **í…ŒìŠ¤íŠ¸**: ìë™ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
4. **ë°°í¬**: ì„±ê³µ ì‹œ ìë™ ë°°í¬

### **ìˆ˜ë™ ë°°í¬**
```bash
# Vercel CLI ì„¤ì¹˜
npm i -g vercel

# ë¡œê·¸ì¸
vercel login

# ë°°í¬
vercel --prod
```

### **í™˜ê²½ ë³€ìˆ˜**
- **ìë™ ê´€ë¦¬**: Vercel ëŒ€ì‹œë³´ë“œì—ì„œ ì„¤ì •
- **ì•”í˜¸í™”**: ë¯¼ê°í•œ ì •ë³´ ìë™ ì•”í˜¸í™”
- **ë²„ì „ ê´€ë¦¬**: í™˜ê²½ë³„ ì„¤ì • ë¶„ë¦¬

## ğŸ“ˆ **ìŠ¤ì¼€ì¼ë§**

### **ìë™ ìŠ¤ì¼€ì¼ë§**
- **íŠ¸ë˜í”½ ì¦ê°€**: ìë™ ì¸ìŠ¤í„´ìŠ¤ ì¦ê°€
- **íŠ¸ë˜í”½ ê°ì†Œ**: ìë™ ì¸ìŠ¤í„´ìŠ¤ ê°ì†Œ
- **ë¹„ìš© ìµœì í™”**: ì‚¬ìš©ëŸ‰ ê¸°ë°˜ ê³¼ê¸ˆ

### **ì„±ëŠ¥ ìµœì í™”**
- **Edge Caching**: ì •ì  ì½˜í…ì¸  ìºì‹±
- **Function Caching**: í•¨ìˆ˜ ì‹¤í–‰ ê²°ê³¼ ìºì‹±
- **CDN**: ê¸€ë¡œë²Œ ì½˜í…ì¸  ì „ì†¡

## ğŸ”„ **ë°±ì—… ë° ë³µêµ¬**

### **ìë™ ë°±ì—…**
- **ì½”ë“œ**: Git ì €ì¥ì†Œì— ìë™ ë°±ì—…
- **ì„¤ì •**: Vercel ëŒ€ì‹œë³´ë“œì— ì €ì¥
- **ë°ì´í„°**: ìƒíƒœ ì—†ëŠ” í•¨ìˆ˜ (ë°±ì—… ë¶ˆí•„ìš”)

### **ë³µêµ¬ ì ˆì°¨**
1. **Git ë³µêµ¬**: ì½”ë“œ ë¡¤ë°±
2. **ì¬ë°°í¬**: ìë™ ë˜ëŠ” ìˆ˜ë™ ë°°í¬
3. **ê²€ì¦**: ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

## ğŸ’° **ë¹„ìš© êµ¬ì¡°**

### **ìš”ê¸ˆ ëª¨ë¸**
- **Hobby Plan**: ë¬´ë£Œ (ê°œì¸ í”„ë¡œì íŠ¸)
- **Pro Plan**: ì›” $20 (íŒ€ í”„ë¡œì íŠ¸)
- **Enterprise Plan**: ë§ì¶¤í˜• (ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸)

### **ì‚¬ìš©ëŸ‰ ì œí•œ**
- **Hobby**: ì›” 100GB ëŒ€ì—­í­, 100GB í•¨ìˆ˜ ì‹¤í–‰
- **Pro**: ì›” 1TB ëŒ€ì—­í­, 1TB í•¨ìˆ˜ ì‹¤í–‰
- **Enterprise**: ë¬´ì œí•œ

## ğŸ› ï¸ **ê°œë°œ ë„êµ¬**

### **ë¡œì»¬ ê°œë°œ**
```bash
# ê°œë°œ ì„œë²„ ì‹œì‘
npm run dev

# ë¹Œë“œ
npm run build

# ë¦°íŠ¸
npm run lint
```

### **ë””ë²„ê¹…**
- **Vercel CLI**: ë¡œì»¬ ë””ë²„ê¹…
- **ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬**: ë„¤íŠ¸ì›Œí¬ ëª¨ë‹ˆí„°ë§
- **Vercel ëŒ€ì‹œë³´ë“œ**: ì‹¤ì‹œê°„ ë¡œê·¸

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-07-28
**ë²„ì „**: 1.0.0 